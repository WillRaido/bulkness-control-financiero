<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Control Financiero Bulkness Café</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 10px;
            background-color: #f5f7fa;
            color: #333;
            min-height: 100vh;
        }
        
        @media (max-width: 768px) {
            body {
                padding: 5px;
            }
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        @media (max-width: 768px) {
            .container {
                border-radius: 8px;
                margin: 0 5px;
            }
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        .header h1 {
            margin: 0;
            font-size: 28px;
            font-weight: 600;
        }
        
        @media (max-width: 768px) {
            .header {
                padding: 20px 15px;
            }
            .header h1 {
                font-size: 22px;
            }
            .header p {
                font-size: 14px;
                margin: 5px 0 0 0;
            }
        }
        .tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 1px solid #dee2e6;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }
        .tab {
            flex: 1;
            min-width: 120px;
            padding: 15px 10px;
            text-align: center;
            cursor: pointer;
            background: #f8f9fa;
            border: none;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            white-space: nowrap;
        }
        .tab.active {
            background: white;
            border-bottom: 3px solid #667eea;
            color: #667eea;
        }
        
        @media (max-width: 768px) {
            .tabs {
                -webkit-overflow-scrolling: touch;
            }
            .tab {
                min-width: 100px;
                padding: 12px 8px;
                font-size: 12px;
            }
        }
        .tab-content {
            display: none;
            padding: 30px;
        }
        .tab-content.active {
            display: block;
        }
        
        @media (max-width: 768px) {
            .tab-content {
                padding: 15px;
            }
        }
        .section {
            margin-bottom: 30px;
            padding: 25px;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            background: #f8f9fa;
        }
        
        @media (max-width: 768px) {
            .section {
                margin-bottom: 20px;
                padding: 15px;
            }
        }
        .section h3 {
            margin: 0 0 20px 0;
            color: #495057;
            font-size: 18px;
            font-weight: 600;
            padding-bottom: 10px;
            border-bottom: 2px solid #667eea;
        }
        .financial-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        @media (max-width: 768px) {
            .financial-grid {
                grid-template-columns: 1fr;
                gap: 20px;
                margin-bottom: 20px;
            }
        }
        .card {
            background: white;
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            border-left: 4px solid #667eea;
        }
        
        @media (max-width: 768px) {
            .card {
                padding: 15px;
                border-left-width: 3px;
            }
        }
        .card h4 {
            margin: 0 0 15px 0;
            color: #495057;
            font-size: 16px;
            font-weight: 600;
        }
        .input-group {
            margin-bottom: 15px;
        }
        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: #495057;
        }
        .input-group input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ced4da;
            border-radius: 4px;
            font-size: 14px;
            box-sizing: border-box;
        }
        .input-group input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        @media (max-width: 768px) {
            .input-group input {
                font-size: 16px; /* Evita zoom en iOS */
                padding: 12px;
            }
        }
        .result {
            padding: 15px;
            background: #e7f3ff;
            border-left: 4px solid #007bff;
            border-radius: 4px;
            font-weight: 600;
            font-size: 16px;
            margin-top: 15px;
        }
        .alert {
            padding: 15px;
            border-radius: 4px;
            margin-top: 15px;
            font-weight: 500;
            font-size: 14px;
            line-height: 1.4;
        }
        
        @media (max-width: 768px) {
            .alert {
                padding: 12px;
                font-size: 13px;
                margin-top: 12px;
            }
        }
        .alert.success {
            background: #d4edda;
            color: #155724;
            border-left: 4px solid #28a745;
        }
        .alert.warning {
            background: #fff3cd;
            color: #856404;
            border-left: 4px solid #ffc107;
        }
        .alert.danger {
            background: #f8d7da;
            color: #721c24;
            border-left: 4px solid #dc3545;
        }
        .table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            overflow-x: auto;
            display: block;
            white-space: nowrap;
        }
        .table thead, .table tbody {
            display: table;
            width: 100%;
            table-layout: fixed;
        }
        .table th, .table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #dee2e6;
            white-space: normal;
            word-wrap: break-word;
        }
        .table th {
            background: #667eea;
            color: white;
            font-weight: 600;
            position: sticky;
            top: 0;
        }
        .table tr:hover {
            background: #f8f9fa;
        }
        
        @media (max-width: 768px) {
            .table {
                font-size: 12px;
                display: block;
                overflow-x: auto;
                white-space: nowrap;
                -webkit-overflow-scrolling: touch;
            }
            .table thead, .table tbody {
                display: table;
                width: 100%;
            }
            .table th, .table td {
                padding: 8px 6px;
                min-width: 80px;
            }
            
            /* Estilo especial para tablas en móvil */
            .mobile-table {
                display: block;
                overflow-x: auto;
                white-space: nowrap;
            }
            .mobile-table .table {
                min-width: 600px;
            }
        }
        .btn {
            background: #667eea;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: background 0.3s ease;
            width: 100%;
            margin-top: 10px;
        }
        .btn:hover {
            background: #5a6fd8;
        }
        
        @media (max-width: 768px) {
            .btn {
                padding: 12px 20px;
                font-size: 16px;
                touch-action: manipulation; /* Mejora la experiencia táctil */
            }
        }
        .status-good { color: #28a745; font-weight: 600; }
        .status-warning { color: #ffc107; font-weight: 600; }
        .status-danger { color: #dc3545; font-weight: 600; }
        .number { 
            font-family: 'Courier New', monospace; 
            font-size: 13px;
        }
        
        @media (max-width: 768px) {
            .number {
                font-size: 11px;
            }
        }
        
        /* Mejoras para touch */
        @media (max-width: 768px) {
            * {
                -webkit-tap-highlight-color: rgba(0,0,0,0.1);
            }
            
            .tab {
                -webkit-tap-highlight-color: rgba(102, 126, 234, 0.2);
            }
            
            /* Scroll suave en tablas */
            .table-container {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
                margin: 15px -15px;
                padding: 0 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>📊 Control Financiero Bulkness Café</h1>
            <p>Sistema de Control para Socios</p>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="showTab('gastos')">💰 Gastos Fijos</button>
            <button class="tab" onclick="showTab('ventas')">📈 Análisis Ventas</button>
            <button class="tab" onclick="showTab('inversiones')">📊 Inversiones Socios</button>
            <button class="tab" onclick="showTab('deudas')">💳 Deudas y Pagos</button>
            <button class="tab" onclick="showTab('proyeccion')">🎯 Proyección</button>
            <button class="tab" onclick="showTab('alertas')">⚠️ Alertas</button>
        </div>

        <div id="gastos" class="tab-content active">
            <div class="financial-grid">
                <div class="card">
                    <h4>💸 Gastos Fijos Mensuales</h4>
                    <div class="input-group">
                        <label>Arriendo (30% de $8M):</label>
                        <input type="number" id="arriendo" value="2400000" readonly>
                    </div>
                    <div class="input-group">
                        <label>Nómina Nico (Salario mínimo):</label>
                        <input type="number" id="nico" value="1300000">
                    </div>
                    <div class="input-group">
                        <label>Nómina Gustavo (Salario mínimo):</label>
                        <input type="number" id="gustavo" value="1300000">
                    </div>
                    <div class="input-group">
                        <label>Agua:</label>
                        <input type="number" id="agua" value="300000">
                    </div>
                    <div class="input-group">
                        <label>Luz:</label>
                        <input type="number" id="luz" value="500000">
                    </div>
                    <div class="input-group">
                        <label>Internet:</label>
                        <input type="number" id="internet" value="100000">
                    </div>
                    <div class="input-group">
                        <label>Otros gastos (seguros, sistema, etc.):</label>
                        <input type="number" id="otros" value="500000" placeholder="Seguros, Siigo, etc.">
                    </div>
                    <button class="btn" onclick="calcular()">Calcular</button>
                </div>

                <div class="card">
                    <h4>📊 Resumen Financiero</h4>
                    <div class="result">
                        <strong>Total Gastos Fijos:</strong><br>
                        <span class="number" id="totalGastos">$6,400,000</span>
                    </div>
                    <div class="result">
                        <strong>Venta Diaria Necesaria:</strong><br>
                        <span class="number" id="ventaDiaria">$213,333</span>
                    </div>
                    <div class="result">
                        <strong>Venta Mensual Necesaria:</strong><br>
                        <span class="number" id="ventaMensual">$6,400,000</span>
                    </div>
                    <div id="estadoActual" class="alert warning">
                        <strong>Estado Actual:</strong> Necesitas análisis de ventas
                    </div>
                </div>
            </div>

            <div class="section">
                <h3>📋 Desglose de Gastos</h3>
                <table class="table">
                    <thead>
                        <tr>
                            <th>Concepto</th>
                            <th>Valor Mensual</th>
                            <th>% del Total</th>
                            <th>Responsable</th>
                        </tr>
                    </thead>
                    <tbody id="tablaGastos">
                        <tr><td>Arriendo (30%)</td><td class="number">$2,400,000</td><td>37.5%</td><td>Bulkness</td></tr>
                        <tr><td>Nómina Nico</td><td class="number">$1,300,000</td><td>20.3%</td><td>Bulkness</td></tr>
                        <tr><td>Nómina Gustavo</td><td class="number">$1,300,000</td><td>20.3%</td><td>Bulkness</td></tr>
                        <tr><td>Luz</td><td class="number">$500,000</td><td>7.8%</td><td>Bulkness</td></tr>
                        <tr><td>Otros gastos</td><td class="number">$500,000</td><td>7.8%</td><td>Bulkness</td></tr>
                        <tr><td>Agua</td><td class="number">$300,000</td><td>4.7%</td><td>Bulkness</td></tr>
                        <tr><td>Internet</td><td class="number">$100,000</td><td>1.6%</td><td>Bulkness</td></tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div id="ventas" class="tab-content">
            <div class="financial-grid">
                <div class="card">
                    <h4>📈 Análisis de Ventas</h4>
                    <div class="input-group">
                        <label>Venta Diaria Promedio Actual:</label>
                        <input type="number" id="ventaActual" value="150000" placeholder="Según reportes">
                    </div>
                    <div class="input-group">
                        <label>Días operativos al mes:</label>
                        <input type="number" id="diasMes" value="30">
                    </div>
                    <div class="input-group">
                        <label>Margen de ganancia estimado (%):</label>
                        <input type="number" id="margen" value="60" placeholder="60%">
                    </div>
                    <button class="btn" onclick="analizarVentas()">Analizar</button>
                </div>

                <div class="card">
                    <h4>🎯 Resultados del Análisis</h4>
                    <div class="result">
                        <strong>Ventas Mensuales Actuales:</strong><br>
                        <span class="number" id="ventasActualesMes">$4,500,000</span>
                    </div>
                    <div class="result">
                        <strong>Ganancia Neta Mensual:</strong><br>
                        <span class="number" id="gananciaNeta">$2,700,000</span>
                    </div>
                    <div class="result">
                        <strong>Balance (Ganancia - Gastos):</strong><br>
                        <span class="number" id="balance">-$3,700,000</span>
                    </div>
                    <div id="recomendacion" class="alert danger">
                        <strong>⚠️ Déficit mensual de $3,700,000</strong>
                    </div>
                </div>
            </div>

            <div class="section">
                <h3>📊 Escenarios de Venta</h3>
                <div class="table-container">
                    <table class="table" id="tablaEscenarios">
                        <thead>
                            <tr>
                                <th>Venta Diaria</th>
                                <th>Venta Mensual</th>
                                <th>Ganancia Neta</th>
                                <th>Balance</th>
                                <th>Estado</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td class="number">$150,000</td><td class="number">$4,500,000</td><td class="number">$2,700,000</td><td class="number status-danger">-$3,700,000</td><td class="status-danger">Pérdida</td></tr>
                            <tr><td class="number">$200,000</td><td class="number">$6,000,000</td><td class="number">$3,600,000</td><td class="number status-danger">-$2,800,000</td><td class="status-danger">Pérdida</td></tr>
                            <tr><td class="number">$250,000</td><td class="number">$7,500,000</td><td class="number">$4,500,000</td><td class="number status-danger">-$1,900,000</td><td class="status-danger">Pérdida</td></tr>
                            <tr><td class="number">$300,000</td><td class="number">$9,000,000</td><td class="number">$5,400,000</td><td class="number status-danger">-$1,000,000</td><td class="status-danger">Pérdida</td></tr>
                            <tr><td class="number">$356,000</td><td class="number">$10,680,000</td><td class="number">$6,408,000</td><td class="number status-good">+$8,000</td><td class="status-good">Equilibrio</td></tr>
                            <tr><td class="number">$400,000</td><td class="number">$12,000,000</td><td class="number">$7,200,000</td><td class="number status-good">+$800,000</td><td class="status-good">Ganancia</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div id="inversiones" class="tab-content">
            <div class="section">
                <h3>📊 Inversión Actual por Socio (Actualizado 30 Jul 2025)</h3>
                <div class="financial-grid">
                    <div class="card">
                        <h4>💰 William Quintero</h4>
                        <table class="table">
                            <thead>
                                <tr><th>Fecha</th><th>Concepto</th><th>Valor</th></tr>
                            </thead>
                            <tbody>
                                <tr><td>Inicial</td><td>Inversión base</td><td class="number">$9,000,000</td></tr>
                                <tr><td>26/06/2025</td><td>Aporte adicional</td><td class="number">$3,200,000</td></tr>
                                <tr><td>30/07/2025</td><td>Abono deuda Juan</td><td class="number">$1,000,000</td></tr>
                                <tr><td>30/07/2025</td><td>Sistema Siigo (T.C)</td><td class="number">$780,000</td></tr>
                                <tr><td>30/07/2025</td><td>Capital trabajo/mercado</td><td class="number">$1,000,000</td></tr>
                                <tr style="background: #e7f3ff; font-weight: bold;"><td colspan="2"><strong>TOTAL WILLIAM</strong></td><td class="number"><strong>$14,980,000</strong></td></tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="card">
                        <h4>👥 Otros Socios (28 Jul 2025)</h4>
                        <table class="table">
                            <thead>
                                <tr><th>Socio</th><th>Inversión Total</th><th>% Participación</th></tr>
                            </thead>
                            <tbody>
                                <tr><td><strong>William</strong></td><td class="number"><strong>$14,980,000</strong></td><td><strong>29.8%</strong></td></tr>
                                <tr><td>Daniel</td><td class="number">$12,000,000</td><td>23.9%</td></tr>
                                <tr><td>Paula</td><td class="number">$11,142,000</td><td>22.2%</td></tr>
                                <tr><td>Julián</td><td class="number">$11,142,000</td><td>22.2%</td></tr>
                                <tr style="background: #f8f9fa; font-weight: bold;"><td><strong>TOTAL</strong></td><td class="number"><strong>$49,264,000</strong></td><td><strong>100%</strong></td></tr>
                            </tbody>
                        </table>
                        <div class="alert warning">
                            <strong>⚠️ Nota:</strong> William es ahora el mayor inversionista con $14.98M
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <h4>📈 Evolución de Inversión William</h4>
                    <table class="table">
                        <thead>
                            <tr><th>Período</th><th>Inversión Acumulada</th><th>Motivo</th><th>Estado</th></tr>
                        </thead>
                        <tbody>
                            <tr><td>Inicial</td><td class="number">$9,000,000</td><td>Inversión base original</td><td class="status-good">✅ Pagado</td></tr>
                            <tr><td>Jun 2025</td><td class="number">$12,200,000</td><td>Capital adicional + emergencias</td><td class="status-good">✅ Pagado</td></tr>
                            <tr><td>Jul 2025</td><td class="number">$14,980,000</td><td>Crisis liquidez + sistema + deuda Juan</td><td class="status-warning">💳 T.C</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div id="deudas" class="tab-content">
            <div class="section">
                <h3>💳 Control de Deudas y Pagos Pendientes</h3>
                <div class="financial-grid">
                    <div class="card">
                        <h4>🏦 Deuda Juan (Suplementos)</h4>
                        <div class="alert warning">
                            <strong>Deuda Original:</strong> $3,200,000 (capital suplementos)<br>
                            <strong>Abono William (29 Jul):</strong> $1,000,000<br>
                            <strong>Saldo Pendiente:</strong> $2,200,000
                        </div>
                        <table class="table">
                            <thead>
                                <tr><th>Fecha Pago</th><th>Valor Cuota</th><th>Estado</th><th>Días Restantes</th></tr>
                            </thead>
                            <tbody>
                                <tr><td>15 Agosto 2025</td><td class="number">$733,000</td><td class="status-warning">⏳ Pendiente</td><td id="dias1">16 días</td></tr>
                                <tr><td>30 Agosto 2025</td><td class="number">$733,000</td><td class="status-warning">⏳ Pendiente</td><td id="dias2">31 días</td></tr>
                                <tr><td>15 Sept 2025</td><td class="number">$734,000</td><td class="status-warning">⏳ Pendiente</td><td id="dias3">47 días</td></tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="card">
                        <h4>💳 Sistema Siigo (Tarjeta William)</h4>
                        <div class="alert danger">
                            <strong>Total:</strong> $780,000 - Pagado con T.C William<br>
                            <strong>Modalidad:</strong> 3 cuotas de $260,000 c/u<br>
                            <strong>⚠️ Requiere reintegro urgente</strong>
                        </div>
                        <div class="input-group">
                            <label>Fecha facturación T.C:</label>
                            <input type="date" id="fechaTC" value="2025-07-30">
                        </div>
                        <button class="btn" onclick="calcularCuotasTC()">Calcular Vencimientos</button>
                        <div id="cuotasTC"></div>
                    </div>
                </div>
                
                <div class="card">
                    <h4>📋 Otras Deudas Pendientes (Mayo 2025)</h4>
                    <table class="table">
                        <thead>
                            <tr><th>Acreedor</th><th>Concepto</th><th>Valor</th><th>Estado</th></tr>
                        </thead>
                        <tbody>
                            <tr><td>Juan</td><td>Suplementos (ver arriba)</td><td class="number">$2,200,000</td><td class="status-warning">En cuotas</td></tr>
                            <tr><td>Alejo</td><td>MR Cream</td><td class="number">$75,000</td><td class="status-warning">Pendiente</td></tr>
                            <tr><td>Jhon tatuador</td><td>Suplementos</td><td class="number">$386,000</td><td class="status-warning">Por recoger</td></tr>
                            <tr><td>Daniel</td><td>Varios</td><td class="number">$40,000</td><td class="status-warning">Pendiente</td></tr>
                            <tr><td>Paula</td><td>Gastos varios</td><td class="number">$54,000</td><td class="status-warning">Pendiente</td></tr>
                            <tr><td>Julián</td><td>Gastos varios</td><td class="number">$25,000</td><td class="status-warning">Pendiente</td></tr>
                        </tbody>
                    </table>
                    <div class="result">
                        <strong>Total Deudas Menores:</strong> $580,000
                    </div>
                </div>
            </div>
        </div>
            <div class="section">
                <h3>🎯 Metas para Alcanzar Equilibrio</h3>
                <div class="financial-grid">
                    <div class="card">
                        <h4>📋 Plan de Acción</h4>
                        <div class="alert warning">
                            <strong>Meta Crítica:</strong><br>
                            Alcanzar <strong>$356,000 diarios</strong> para equilibrio
                        </div>
                        <div class="alert success">
                            <strong>Meta Ideal:</strong><br>
                            Alcanzar <strong>$400,000 diarios</strong> para rentabilidad
                        </div>
                        <p><strong>Estrategias sugeridas:</strong></p>
                        <ul>
                            <li>Implementar delivery (Rappi, Uber Eats)</li>
                            <li>Planes de entrenamiento con Nico</li>
                            <li>Alianza con Dharma Gym</li>
                            <li>Marketing digital y pauta</li>
                            <li>Eventos y brunches regulares</li>
                        </ul>
                    </div>
                    
                    <div class="card">
                        <h4>⏰ Cronograma de Metas</h4>
                        <table class="table">
                            <thead>
                                <tr><th>Mes</th><th>Meta Diaria</th><th>Estrategia</th></tr>
                            </thead>
                            <tbody>
                                <tr><td>Mes 1</td><td class="number">$200,000</td><td>Optimizar operación actual</td></tr>
                                <tr><td>Mes 2</td><td class="number">$280,000</td><td>Delivery + Marketing</td></tr>
                                <tr><td>Mes 3</td><td class="number">$356,000</td><td>Equilibrio financiero</td></tr>
                                <tr><td>Mes 4+</td><td class="number">$400,000+</td><td>Crecimiento sostenible</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <div id="alertas" class="tab-content">
            <div class="section">
                <h3>⚠️ Sistema de Alertas</h3>
                <div id="alertasContainer">
                    <div class="alert danger">
                        <strong>🚨 CRÍTICO:</strong> Déficit operativo de $3.7M mensuales - Requiere acción inmediata
                    </div>
                    <div class="alert warning">
                        <strong>⚠️ ADVERTENCIA:</strong> Ventas actuales cubren solo 42% de gastos fijos
                    </div>
                    <div class="alert warning">
                        <strong>📊 CONTROL:</strong> Se requiere aumentar ventas 137% para alcanzar equilibrio
                    </div>
                    <div class="alert success">
                        <strong>✅ POSITIVO:</strong> Estructura de costos definida y controlable
                    </div>
                </div>
                
                <div class="card">
                    <h4>📈 Indicadores Clave (KPIs)</h4>
                    <table class="table">
                        <thead>
                            <tr><th>Indicador</th><th>Valor Actual</th><th>Meta</th><th>Estado</th></tr>
                        </thead>
                        <tbody>
                            <tr><td>Inversión William</td><td class="number">$14,980,000</td><td class="number">$12,000,000</td><td class="status-danger">Excedida 25%</td></tr>
                            <tr><td>Venta Diaria</td><td class="number">$150,000</td><td class="number">$356,000</td><td class="status-danger">Crítico</td></tr>
                            <tr><td>Deuda externa</td><td class="number">$2,980,000</td><td class="number">$0</td><td class="status-danger">Alto riesgo</td></tr>
                            <tr><td>Balance Mensual</td><td class="number">-$3,700,000</td><td class="number">$0</td><td class="status-danger">Crítico</td></tr>
                            <tr><td>Días supervivencia</td><td>45 días</td><td>∞</td><td class="status-danger">Emergencia</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script>
        function showTab(tabName) {
            // Ocultar todos los contenidos de tabs
            const contents = document.querySelectorAll('.tab-content');
            contents.forEach(content => content.classList.remove('active'));
            
            // Remover clase active de todos los tabs
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            // Mostrar el contenido seleccionado
            document.getElementById(tabName).classList.add('active');
            
            // Activar el tab seleccionado
            event.target.classList.add('active');
        }

        function formatNumber(num) {
            return new Intl.NumberFormat('es-CO', {
                style: 'currency',
                currency: 'COP',
                minimumFractionDigits: 0
            }).format(num);
        }

        function calcular() {
            const arriendo = parseFloat(document.getElementById('arriendo').value) || 0;
            const nico = parseFloat(document.getElementById('nico').value) || 0;
            const gustavo = parseFloat(document.getElementById('gustavo').value) || 0;
            const agua = parseFloat(document.getElementById('agua').value) || 0;
            const luz = parseFloat(document.getElementById('luz').value) || 0;
            const internet = parseFloat(document.getElementById('internet').value) || 0;
            const otros = parseFloat(document.getElementById('otros').value) || 0;

            const totalGastos = arriendo + nico + gustavo + agua + luz + internet + otros;
            const ventaDiaria = totalGastos / 30;
            const ventaMensual = totalGastos;

            document.getElementById('totalGastos').textContent = formatNumber(totalGastos);
            document.getElementById('ventaDiaria').textContent = formatNumber(ventaDiaria);
            document.getElementById('ventaMensual').textContent = formatNumber(ventaMensual);

            // Actualizar tabla de gastos
            actualizarTablaGastos(arriendo, nico, gustavo, agua, luz, internet, otros, totalGastos);
        }

        function actualizarTablaGastos(arriendo, nico, gustavo, agua, luz, internet, otros, total) {
            const tbody = document.getElementById('tablaGastos');
            tbody.innerHTML = `
                <tr><td>Arriendo (30%)</td><td class="number">${formatNumber(arriendo)}</td><td>${((arriendo/total)*100).toFixed(1)}%</td><td>Bulkness</td></tr>
                <tr><td>Nómina Nico</td><td class="number">${formatNumber(nico)}</td><td>${((nico/total)*100).toFixed(1)}%</td><td>Bulkness</td></tr>
                <tr><td>Nómina Gustavo</td><td class="number">${formatNumber(gustavo)}</td><td>${((gustavo/total)*100).toFixed(1)}%</td><td>Bulkness</td></tr>
                <tr><td>Luz</td><td class="number">${formatNumber(luz)}</td><td>${((luz/total)*100).toFixed(1)}%</td><td>Bulkness</td></tr>
                <tr><td>Otros gastos</td><td class="number">${formatNumber(otros)}</td><td>${((otros/total)*100).toFixed(1)}%</td><td>Bulkness</td></tr>
                <tr><td>Agua</td><td class="number">${formatNumber(agua)}</td><td>${((agua/total)*100).toFixed(1)}%</td><td>Bulkness</td></tr>
                <tr><td>Internet</td><td class="number">${formatNumber(internet)}</td><td>${((internet/total)*100).toFixed(1)}%</td><td>Bulkness</td></tr>
            `;
        }

        function analizarVentas() {
            const ventaActual = parseFloat(document.getElementById('ventaActual').value) || 0;
            const diasMes = parseFloat(document.getElementById('diasMes').value) || 30;
            const margen = parseFloat(document.getElementById('margen').value) || 60;
            
            const totalGastos = parseFloat(document.getElementById('totalGastos').textContent.replace(/[^\d]/g, '')) || 6400000;
            
            const ventasActualesMes = ventaActual * diasMes;
            const gananciaNeta = ventasActualesMes * (margen / 100);
            const balance = gananciaNeta - totalGastos;

            document.getElementById('ventasActualesMes').textContent = formatNumber(ventasActualesMes);
            document.getElementById('gananciaNeta').textContent = formatNumber(gananciaNeta);
            document.getElementById('balance').textContent = formatNumber(balance);

            const recomendacion = document.getElementById('recomendacion');
            if (balance > 0) {
                recomendacion.className = 'alert success';
                recomendacion.innerHTML = `<strong>✅ Ganancia mensual de ${formatNumber(balance)}</strong>`;
            } else if (balance > -500000) {
                recomendacion.className = 'alert warning';
                recomendacion.innerHTML = `<strong>⚠️ Déficit menor de ${formatNumber(Math.abs(balance))}</strong>`;
            } else {
                recomendacion.className = 'alert danger';
                recomendacion.innerHTML = `<strong>🚨 Déficit crítico de ${formatNumber(Math.abs(balance))}</strong>`;
            }

            // Actualizar tabla de escenarios
            actualizarEscenarios(totalGastos, margen, diasMes);
        }

        function actualizarEscenarios(gastos, margen, dias) {
            const escenarios = [150000, 200000, 250000, 300000, 356000, 400000];
            const tbody = document.querySelector('#tablaEscenarios tbody');
            
            tbody.innerHTML = escenarios.map(venta => {
                const ventaMensual = venta * dias;
                const ganancia = ventaMensual * (margen / 100);
                const balance = ganancia - gastos;
                
                let estado, clase;
                if (balance > 100000) {
                    estado = 'Ganancia';
                    clase = 'status-good';
                } else if (balance > -100000) {
                    estado = 'Equilibrio';
                    clase = 'status-good';
                } else {
                    estado = 'Pérdida';
                    clase = 'status-danger';
                }
                
                return `
                    <tr>
                        <td class="number">${formatNumber(venta)}</td>
                        <td class="number">${formatNumber(ventaMensual)}</td>
                        <td class="number">${formatNumber(ganancia)}</td>
                        <td class="number ${clase}">${formatNumber(balance)}</td>
                        <td class="${clase}">${estado}</td>
                    </tr>
                `;
            }).join('');
        }

        // Calcular valores iniciales al cargar
        window.onload = function() {
            calcular();
            analizarVentas();
            calcularCuotasTC();
            
            // Actualizar contadores de días para deuda Juan
            const hoy = new Date();
            const fechas = [
                new Date('2025-08-15'),
                new Date('2025-08-30'), 
                new Date('2025-09-15')
            ];
            
            fechas.forEach((fecha, index) => {
                const dias = Math.ceil((fecha - hoy) / (1000 * 60 * 60 * 24));
                const elemento = document.getElementById(`dias${index + 1}`);
                if (elemento) {
                    elemento.textContent = `${dias} días`;
                    elemento.className = dias < 15 ? 'status-danger' : dias < 30 ? 'status-warning' : '';
                }
            });
        };
    </script>
</body>
</html>
